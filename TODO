0. fix static counters in unit_test;
1. extend ThreadBase;
2. add PtrGuard template;
3. add unit tests;
4. add comments;