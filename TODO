1. extend ThreadBase;
2. add PtrGurad template;
3. add unit tests;
4. add comments;